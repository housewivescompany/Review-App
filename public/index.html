<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Creative Approval Tool</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="header-inner">
        <a href="/" class="logo" id="logo-link">
          <svg id="logo-default-icon" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
            <path d="M2 17l10 5 10-5"></path>
            <path d="M2 12l10 5 10-5"></path>
          </svg>
          <img id="logo-custom-img" class="logo-img" style="display:none;" alt="Logo">
          <span id="brand-name" class="brand-name-text">ReviewFlow</span>
        </a>
        <div class="header-right">
          <button class="settings-btn" onclick="openSettings()" title="Settings">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
          </button>
          <button class="admin-signout-btn" id="admin-signout-btn" onclick="adminSignOut()" style="display:none;">Sign Out</button>
        </div>
      </div>
    </header>

    <!-- Admin Login Screen -->
    <div id="admin-login" class="admin-login" style="display:none;">
      <div class="admin-login-card">
        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
        <h2>Staff Login</h2>
        <p>Enter the admin password to access the dashboard.</p>
        <form onsubmit="adminLogin(event)">
          <input type="password" id="admin-password" class="input-field" placeholder="Password" autofocus>
          <button type="submit" class="btn btn-primary" style="width:100%;margin-top:8px;">Sign In</button>
        </form>
        <p id="admin-login-error" style="color:#ef4444;font-size:0.85rem;margin-top:8px;display:none;">Incorrect password</p>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main" id="main-content" style="display:none;">
      <!-- Projects List View -->
      <div id="projects-view">
        <div class="section-header">
          <div>
            <h1>Projects</h1>
            <p class="subtitle">Manage creative approvals for your clients</p>
          </div>
          <button class="btn btn-primary" onclick="showNewProjectModal()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
            New Project
          </button>
        </div>

        <div class="project-tabs" id="project-tabs">
          <button class="project-tab active" data-tab="active" onclick="switchProjectTab('active')">Active <span class="tab-count" id="active-tab-count">0</span></button>
          <button class="project-tab" data-tab="archived" onclick="switchProjectTab('archived')">Archived <span class="tab-count" id="archived-tab-count">0</span></button>
        </div>

        <div id="projects-list" class="projects-grid">
          <!-- Populated by JS -->
        </div>
        <div id="empty-state" class="empty-state" style="display:none;">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
          </svg>
          <h2>No projects yet</h2>
          <p>Create your first project to start collecting creative approvals</p>
          <button class="btn btn-primary" onclick="showNewProjectModal()">Create Project</button>
        </div>
      </div>

      <!-- Single Project View -->
      <div id="project-view" style="display:none;">
        <div class="breadcrumb">
          <a href="#" onclick="showProjectsList(); return false;">Projects</a>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg>
          <span id="project-breadcrumb-name"></span>
        </div>

        <div class="section-header">
          <div>
            <h1 id="project-title"></h1>
            <p class="subtitle" id="project-client"></p>
          </div>
          <div class="header-actions">
            <button class="btn btn-outline" onclick="copyShareLink()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path><polyline points="16 6 12 2 8 6"></polyline><line x1="12" y1="2" x2="12" y2="15"></line></svg>
              Share Review Link
            </button>
            <button class="btn btn-outline" onclick="downloadAllCreatives()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
              Download All
            </button>
            <button class="btn btn-archive" id="archive-btn" onclick="toggleArchiveProject()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="21 8 21 21 3 21 3 8"></polyline><rect x="1" y="3" width="22" height="5"></rect><line x1="10" y1="12" x2="14" y2="12"></line></svg>
              Archive
            </button>
            <button class="btn btn-danger-outline" onclick="confirmDeleteProject()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
              Delete
            </button>
          </div>
        </div>

        <!-- Progress Bar -->
        <div class="approval-progress">
          <div class="progress-stats">
            <span class="stat stat-approved"><span class="dot dot-approved"></span> <span id="approved-count">0</span> Approved</span>
            <span class="stat stat-pending"><span class="dot dot-pending"></span> <span id="pending-count">0</span> Pending</span>
            <span class="stat stat-revision"><span class="dot dot-revision"></span> <span id="revision-count">0</span> Revisions</span>
          </div>
          <div class="progress-bar">
            <div id="progress-fill" class="progress-fill"></div>
          </div>
        </div>

        <!-- Upload Zone -->
        <div id="upload-zone" class="upload-zone">
          <input type="file" id="file-input" multiple accept="image/*,video/*,.pdf" style="display:none;">
          <div class="upload-content">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <h3>Drag & drop files here</h3>
            <p>or <button class="link-btn" onclick="document.getElementById('file-input').click()">browse files</button></p>
            <p class="upload-hint">Supports images, videos, and PDFs (up to 500MB each)</p>
          </div>
          <div class="upload-progress" id="upload-progress" style="display:none;">
            <div class="upload-progress-bar">
              <div class="upload-progress-fill" id="upload-progress-fill"></div>
            </div>
            <p id="upload-status">Uploading...</p>
          </div>
        </div>

        <!-- Creatives Grid -->
        <div id="creatives-grid" class="creatives-grid">
          <!-- Populated by JS -->
        </div>
      </div>
    </main>

    <!-- New Project Modal -->
    <div id="new-project-modal" class="modal-overlay" style="display:none;">
      <div class="modal">
        <div class="modal-header">
          <h2>New Project</h2>
          <button class="close-btn" onclick="hideNewProjectModal()">&times;</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="project-name-input">Project Name *</label>
            <input type="text" id="project-name-input" placeholder="e.g., Brand Campaign Q1 2025" autofocus>
          </div>
          <div class="form-group">
            <label for="client-name-input">Client Name</label>
            <div class="suggestions-wrapper">
              <input type="text" id="client-name-input" placeholder="e.g., Acme Corp" autocomplete="off">
              <div id="client-suggestions" class="suggestions-list" style="display:none;"></div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="hideNewProjectModal()">Cancel</button>
          <button class="btn btn-primary" onclick="createProject()">Create Project</button>
        </div>
      </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal-overlay" style="display:none;">
      <div class="modal modal-sm">
        <div class="modal-header">
          <h2>Delete Project</h2>
          <button class="close-btn" onclick="hideDeleteModal()">&times;</button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete this project? All creatives and comments will be permanently removed. This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="hideDeleteModal()">Cancel</button>
          <button class="btn btn-danger" onclick="deleteProject()">Delete Project</button>
        </div>
      </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay" style="display:none;">
      <div class="modal">
        <div class="modal-header">
          <h2>Settings</h2>
          <button class="close-btn" onclick="closeSettings()">&times;</button>
        </div>
        <div class="modal-body">
          <!-- Logo -->
          <div class="settings-section">
            <div class="settings-section-title">Logo</div>
            <div class="logo-preview">
              <div class="logo-preview-default" id="settings-logo-default">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path></svg>
              </div>
              <img id="settings-logo-img" class="logo-preview-img" style="display:none;" alt="Current logo">
              <div class="logo-actions">
                <input type="file" id="logo-file-input" accept="image/*" style="display:none;">
                <button class="btn btn-outline btn-sm" onclick="document.getElementById('logo-file-input').click()">Upload Logo</button>
                <button class="btn btn-ghost btn-sm" id="remove-logo-btn" onclick="removeLogo()" style="display:none;">Remove</button>
              </div>
            </div>
          </div>

          <!-- Brand Name -->
          <div class="settings-section">
            <div class="settings-section-title">Brand Name</div>
            <input type="text" id="settings-brand-name" class="input-field" placeholder="ReviewFlow">
          </div>

          <!-- Theme -->
          <div class="settings-section">
            <div class="settings-section-title">Theme</div>
            <div class="theme-toggle">
              <button class="theme-option active" data-theme="dark" onclick="setTheme('dark')">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                Dark
              </button>
              <button class="theme-option" data-theme="light" onclick="setTheme('light')">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                Light
              </button>
            </div>
          </div>

          <!-- Accent Color -->
          <div class="settings-section">
            <div class="settings-section-title">Accent Color</div>
            <div class="color-presets" id="color-presets">
              <button class="color-swatch active" style="background:#6366f1;" data-color="#6366f1" onclick="setAccentColor('#6366f1')" title="Indigo"></button>
              <button class="color-swatch" style="background:#8b5cf6;" data-color="#8b5cf6" onclick="setAccentColor('#8b5cf6')" title="Violet"></button>
              <button class="color-swatch" style="background:#ec4899;" data-color="#ec4899" onclick="setAccentColor('#ec4899')" title="Pink"></button>
              <button class="color-swatch" style="background:#ef4444;" data-color="#ef4444" onclick="setAccentColor('#ef4444')" title="Red"></button>
              <button class="color-swatch" style="background:#f97316;" data-color="#f97316" onclick="setAccentColor('#f97316')" title="Orange"></button>
              <button class="color-swatch" style="background:#eab308;" data-color="#eab308" onclick="setAccentColor('#eab308')" title="Yellow"></button>
              <button class="color-swatch" style="background:#22c55e;" data-color="#22c55e" onclick="setAccentColor('#22c55e')" title="Green"></button>
              <button class="color-swatch" style="background:#06b6d4;" data-color="#06b6d4" onclick="setAccentColor('#06b6d4')" title="Cyan"></button>
              <button class="color-swatch" style="background:#3b82f6;" data-color="#3b82f6" onclick="setAccentColor('#3b82f6')" title="Blue"></button>
            </div>
            <div class="color-custom-row">
              <input type="color" id="custom-color-picker" value="#6366f1" onchange="setAccentColor(this.value)">
              <span>Custom color</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-ghost" onclick="closeSettings()">Close</button>
        </div>
      </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" style="display:none;"></div>
  </div>

  <script src="/js/app.js"></script>
</body>
</html>
